{% extends 'main.html.twig' %}

{% block body %}
<section class="produit_section mt-5">
  <div class="container">
    <h2 class="text-center mb-4">Produits de la catégorie {{ cat.nomCat }}</h2>

    {% set produitsFiltres = produits|filter(p => p.categorie is defined and p.categorie is not null and p.categorie.id == cat.id) %}

    {% if produitsFiltres|length > 0 %}
      <div class="row g-4">
      {% for produit in produitsFiltres %}
        {% include 'components/_product_card.html.twig' with { produit: produit } %}
      {% endfor %}
      </div>
    {% else %}
      <p class="text-center">Aucun produit trouvé pour cette catégorie.</p>
    {% endif %}
  </div>
</section>

<!-- Product Modal -->

{% endblock %}